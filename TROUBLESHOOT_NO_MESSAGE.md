# メッセージが表示されない場合の対処法

## 🔍 確認事項

### 1. Flaskアプリが起動しているか確認

**正しいターミナルを確認してください：**
- `python main.py` を実行したターミナル
- 「🚀 Todo List App サーバーを起動...」と表示されているターミナル
- `http://localhost:5000` が表示されているターミナル

### 2. Flaskアプリを再起動

デバッグログを追加したので、**Flaskアプリを再起動**してください：

1. Flaskアプリのターミナルで `Ctrl+C` を押して停止
2. 再度起動：
   ```bash
   cd todo_list_app
   python main.py
   ```

### 3. Webhookの状態を確認

以下のコマンドでWebhookの状態を確認できます：

```bash
cd todo_list_app
python check_webhook_status.py
```

このスクリプトは：
- Flaskアプリが起動しているか確認
- Webhookエンドポイントをテスト
- テストリクエストを送信して、Flaskアプリのターミナルに表示されるか確認

### 4. LINE Developers Consoleの設定を確認

1. **Webhook URL**が正しく設定されているか
   - `https://aeromarine-colt-catoptrical.ngrok-free.dev/line/webhook`
   - `/line/webhook` が含まれているか確認

2. **「Webhookの利用」がONになっているか**

3. **「検証」ボタンで成功しているか**

### 5. ngrokのログを確認

ngrokのターミナルで、以下のようなリクエストが記録されているか確認：

```
POST /line/webhook             200 OK
```

記録されていれば、Webhookは正常に動作しています。

### 6. メッセージを送信

LINE公式アカウントにメッセージを送信（例: 「テスト」）

### 7. Flaskアプリのターミナルを確認

メッセージ送信後、以下のような表示が出るはずです：

```
============================================================
📥 POSTリクエストを受信しました
   リモートアドレス: xxx.xxx.xxx.xxx
   ユーザーエージェント: LINE-BotSDK/...
============================================================
✅ リクエストボディを取得しました
   イベント数: 1

   イベント #1:
     タイプ: message
     User ID: U1234567890abcdefghijklmnopqrstuvw
============================================================
✅ メッセージイベントを受信しました！
   User ID: U1234567890abcdefghijklmnopqrstuvw
============================================================
```

## ⚠️ それでも表示されない場合

### 方法1: 手動テスト

```bash
cd todo_list_app
python test_webhook_manual.py
```

このスクリプトは、Flaskアプリに直接テストリクエストを送信します。

### 方法2: ブラウザで確認

ブラウザで以下にアクセス：
```
http://localhost:5000/line/webhook
```

GETリクエストなので、Flaskアプリのターミナルに以下が表示されます：
```
============================================================
✅ Webhook検証リクエストを受信しました (GET)
============================================================
```

これが表示されれば、Webhookエンドポイントは動作しています。

