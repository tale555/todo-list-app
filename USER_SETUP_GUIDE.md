# ユーザー向けセットアップガイド（準備編）

このガイドは、開発開始前にユーザー側で準備しておく必要がある作業を説明します。

## 📋 目次

1. [Google Sheets APIの設定](#google-sheets-apiの設定)
2. [サーバーアカウントの準備（デプロイ用）](#サーバーアカウントの準備)

---

## Google Sheets APIの設定

TodoリストアプリはGoogleスプレッドシートにデータを保存するため、Google Sheets APIの設定が必要です。

### ステップ1: Google Cloud Consoleにアクセス

1. ブラウザで以下のURLを開く：
   - https://console.cloud.google.com/
2. Googleアカウントでログイン

### ステップ2: プロジェクトを作成（既存のプロジェクトを使用する場合はスキップ）

1. 画面上部の「プロジェクトを選択」をクリック
2. 「新しいプロジェクト」をクリック
3. プロジェクト名を入力（例: "Todo List App"）
4. 「作成」をクリック
5. 作成したプロジェクトを選択

**既存のプロジェクトを使用する場合**:
- 既に`configs/silent-life-473721-e2-bd839ba557ad.json`という認証ファイルがある場合は、そのプロジェクトを使用できます
- その場合は、ステップ3から始めてください

### ステップ3: Google Sheets APIを有効化

1. 左側のメニューから「APIとサービス」→「ライブラリ」を選択
2. 検索ボックスに「Google Sheets API」と入力
3. 「Google Sheets API」をクリック
4. 「有効にする」ボタンをクリック

### ステップ4: サービスアカウントを作成

1. 左側のメニューから「APIとサービス」→「認証情報」を選択
2. 画面上部の「+ 認証情報を作成」をクリック
3. 「サービスアカウント」を選択
4. サービスアカウント名を入力（例: "todo-list-service"）
5. 「作成して続行」をクリック
6. ロールは「編集者」を選択（またはスキップ）
7. 「完了」をクリック

### ステップ5: 認証キー（JSONファイル）をダウンロード

1. 作成したサービスアカウントをクリック
2. 「キー」タブを選択
3. 「キーを追加」→「新しいキーを作成」をクリック
4. 「JSON」を選択して「作成」をクリック
5. JSONファイルが自動的にダウンロードされます
6. **重要**: このファイルは安全な場所に保存してください（一度しかダウンロードできません）

### ステップ6: スプレッドシートを作成

1. Googleドライブ（https://drive.google.com/）にアクセス
2. 「新規」→「Googleスプレッドシート」をクリック
3. スプレッドシート名を入力（例: "Todo List"）
4. スプレッドシートを開く
5. URLからスプレッドシートIDをコピー
   - URLの例: `https://docs.google.com/spreadsheets/d/【ここがスプレッドシートID】/edit`
   - 例: `1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms`

### ステップ7: サービスアカウントにスプレッドシートへのアクセス権限を付与

1. 作成したスプレッドシートを開く
2. 右上の「共有」ボタンをクリック
3. ステップ5でダウンロードしたJSONファイルを開く
4. `client_email`の値をコピー（例: `todo-list-service@project-name.iam.gserviceaccount.com`）
5. 共有ダイアログの「ユーザーやグループを追加」欄に、コピーしたメールアドレスを貼り付け
6. 権限を「編集者」に設定
7. 「送信」をクリック（通知は送らないでOK）

### ステップ8: 認証ファイルをプロジェクトに配置

1. ダウンロードしたJSONファイルを`todo_list_app/configs/`フォルダにコピー
2. ファイル名を`credentials.json`にリネーム（または任意の名前）
3. `.env`ファイルに認証ファイルのパスを設定（開発開始後に作成されます）

---

## サーバーアカウントの準備（デプロイ用）

アプリケーションをサーバーで公開するために、以下のいずれかのサービスアカウントを作成しておくと便利です。

### オプション1: Render（推奨・無料プランあり）

1. https://render.com/ にアクセス
2. 「Get Started for Free」をクリック
3. GitHubアカウントでサインアップ
4. アカウント作成完了

**特徴**:
- 無料プランあり
- GitHubと連携して自動デプロイ可能
- 簡単にセットアップできる

### オプション2: Railway

1. https://railway.app/ にアクセス
2. GitHubアカウントでサインアップ
3. アカウント作成完了

**特徴**:
- 無料プランあり（月額$5のクレジット）
- GitHubと連携して自動デプロイ可能

### オプション3: Heroku

1. https://www.heroku.com/ にアクセス
2. 「Sign up」をクリック
3. アカウントを作成

**特徴**:
- 無料プランは廃止されましたが、有料プランあり
- 安定したサービス

---

## ✅ 準備完了チェックリスト

開発開始前に、以下が完了しているか確認してください：

- [ ] Google Cloud Consoleでプロジェクトを作成
- [ ] Google Sheets APIを有効化
- [ ] サービスアカウントを作成
- [ ] 認証キー（JSONファイル）をダウンロード
- [ ] スプレッドシートを作成
- [ ] サービスアカウントにスプレッドシートへのアクセス権限を付与
- [ ] 認証ファイルをプロジェクトに配置（開発開始後）
- [ ] サーバーアカウントを作成（デプロイ時）

---

## 📝 メモ

- 認証ファイル（JSON）は機密情報です。Gitにコミットしないようにしてください
- スプレッドシートIDは後で`.env`ファイルに設定します
- 既存の認証ファイル（`configs/silent-life-473721-e2-bd839ba557ad.json`）が使用可能な場合は、それを流用できます

---

## 🆘 困ったときは

- Google Cloud Consoleのヘルプ: https://cloud.google.com/docs
- Google Sheets APIのドキュメント: https://developers.google.com/sheets/api

---

**注意**: このガイドは開発開始前の準備用です。実際の開発手順は`SETUP_GUIDE.md`（開発開始後に作成）を参照してください。

